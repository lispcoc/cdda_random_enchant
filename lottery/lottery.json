[
  {
    "type": "effect_on_condition",
    "id": "EOC_random_enchant_lottery_main",
    "effect": [
      { "math": [ "u_random_enchant_current", "=", "1" ] },
      { "set_condition": "cond", "condition": { "math": [ "u_random_enchant_current", "<=", "3" ] } },
      {
        "run_eoc_until": {
          "id": "EOC_random_enchant_lottery_nest",
          "effect": [
            {
              "switch": { "math": [ "u_random_enchant_current" ] },
              "cases": [
                { "case": 1, "effect": { "set_string_var": "random_enchant_f_1", "target_var": { "context_val": "target" } } },
                {
                  "case": 2,
                  "effect": { "set_string_var": "random_enchant_f_2", "target_var": { "context_val": "target" } }
                },
                {
                  "case": 3,
                  "effect": { "set_string_var": "random_enchant_f_3", "target_var": { "context_val": "target" } }
                }
              ]
            },
            {
              "weighted_list_eocs": [
                [ "EOC_random_enchant_lottery[ZOMBIE_KILLER]", { "const": 20 } ],
                [ "EOC_random_enchant_lottery[FLIGHT_KILLER]", { "const": 10 } ],
                [ "EOC_random_enchant_lottery[DRAIN_HP]", { "const": 10 } ],
                [ "EOC_random_enchant_lottery[DRAIN_MANA]", { "const": 10 } ],
                [ "EOC_random_enchant_lottery[STOP_TIME]", { "const": 10 } ]
              ]
            },
            {
              "if": { "compare_string": [ "zombie", { "context_val": "group" } ] },
              "then": {
                "weighted_list_eocs": [
                  [ "EOC_random_enchant_lottery[ZOMBIE_KILLER]", { "const": 20 } ],
                  [ "EOC_random_enchant_lottery[FLIGHT_KILLER]", { "const": 10 } ],
                  [ "EOC_random_enchant_lottery[DRAIN_HP]", { "const": 10 } ],
                  [ "EOC_random_enchant_lottery[DRAIN_MANA]", { "const": 10 } ],
                  [ "EOC_random_enchant_lottery[STOP_TIME]", { "const": 10 } ]
                ]
              }
            },
            { "math": [ "u_random_enchant_current", "+=", "1" ] }
          ]
        },
        "condition": "cond"
      },
      { "u_message": "<context_val:difficulty>" }
    ]
  }
]
