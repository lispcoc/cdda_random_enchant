[
  {
    "type": "effect_on_condition",
    "id": "EOC_random_enchant_lottery_main",
    "effect": [
      { "math": [ "_current", "=", "1" ] },
      {
        "run_eoc_until": {
          "id": "EOC_random_enchant_lottery_nest",
          "effect": [
            {
              "switch": { "math": [ "_current" ] },
              "cases": [
                { "case": 1, "effect": { "set_string_var": "random_enchant_f_1", "target_var": { "context_val": "target" } } },
                {
                  "case": 2,
                  "effect": { "set_string_var": "random_enchant_f_2", "target_var": { "context_val": "target" } }
                },
                {
                  "case": 3,
                  "effect": { "set_string_var": "random_enchant_f_3", "target_var": { "context_val": "target" } }
                }
              ]
            },
            {
              "if": { "compare_string": [ "zombie", { "context_val": "group" } ] },
              "then": [
                {
                  "weighted_list_eocs": [
                    [ "EOC_random_enchant_lottery[ZOMBIE_KILLER]", { "const": 20 } ],
                    [ "EOC_random_enchant_lottery[ZOMBIE_KILLER]", { "const": 10 } ]
                  ]
                }
              ]
            },
            { "math": [ "_current", "+=", "1" ] }
          ]
        },
        "condition": { "math": [ "random_enchant_current", "<=", "3" ] }
      }
    ]
  }
]
